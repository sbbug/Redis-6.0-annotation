

## Redis双写一致性问题
    只要使用缓存，就可能会涉及到缓存与数据库的双写，只要是双写，就一定会有数据一致性的问题。
    首先先介绍下经典的 Redis +  BD 的读写模式：
#### 一致性策略    
    读的时候，先读缓存，缓存没有的话，就读数据库，然后取出数据后放入缓存，同时返回响应。
    更新的时候，先删除缓存，在更新数据库。
#### 为什么是删除缓存，而不是更新缓存

    1、因为很多时候，缓存中放的并不是简单的从数据中取出来值，
      可能要进行一个状态的替换，一些数据的计算，还有可能要进行数据的组合等等。
    2、二八法则，即20%的数据，占用了80%的访问量，这个更新的数据，可能是冷门数据，
      好久也访问不了不了一次，这样只会占用缓存内存。lazy思想，数据等你第一次要的时候再去加载，避免没必要的内存和时间浪费。

#### 如果先修改数据库，再删除缓存，会有什么问题？

    如果数据库修改成功，缓存更新失败，那么下次客户单读取数据，
    读到的是旧数据，因此出现问题。
    
    如果先删除缓存，再修改数据库，修改数据库失败，数据回滚，那么此时缓存为空，
    当再次读取数据时，会直接从数据库中获取数据。保证数据一致性。

